<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> vue 构建和组件开发 · greatboy的博客</title><meta name="description" content="vue 构建和组件开发 - greatboy"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://greatboy.github.io/atom.xml" title="greatboy的博客"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/u/5241534083" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/greatboy" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">vue 构建和组件开发</h1><div class="post-info">Apr 18, 2016</div><div class="post-content"><blockquote>
<p>要想用vue开发项目,会简单的语法还不够满足项目的需求,首先我们考虑的就是如果用vue快速投入的项目中,关注亮点<br>1、如何更好的支持组件开发<br>2、如何构建打包程序,例如我们用es6开发<br><a id="more"></a></p>
</blockquote>
<h4 id="一、组件开发"><a href="#一、组件开发" class="headerlink" title="一、组件开发"></a>一、组件开发</h4><p>看过了组件的看法文档,先写两个例子</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test-container"</span>&gt;</span></div><div class="line">    Hello &#123;&#123;msg&#125;&#125;</div><div class="line">    <span class="tag">&lt;<span class="name">my-component</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">my-component1</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component1</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"component-1"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>我是一个自定义的组件dddddddddddddddddddd<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MyComponent = Vue.extend(&#123;</div><div class="line">    template: <span class="string">'#component-1'</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">// 全局注册组件，tag 为 my-component</span></div><div class="line">Vue.component(<span class="string">'my-component'</span>, MyComponent);</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">var</span> MyComponent1 = Vue.extend(&#123;</div><div class="line">    template: <span class="string">'&lt;div&gt;我是一个自定义的组件1,我的模板文件在html里面哦&lt;/div&gt;'</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">// 全局注册组件，tag 为 my-component</span></div><div class="line">Vue.component(<span class="string">'my-component1'</span>, MyComponent1);</div><div class="line"></div><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">    el: <span class="string">'#test-container'</span>,</div><div class="line">    data: &#123;</div><div class="line">        msg: <span class="string">'Great Boy'</span></div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>目前看来组件实现比较方便呀, 那怎么传值呢????</p>
<p>看看props 传值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>组件props 传值<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"props-container"</span>&gt;</span></div><div class="line">    Hello &#123;&#123;msg&#125;&#125;</div><div class="line">     <span class="tag">&lt;<span class="name">my-component2</span> <span class="attr">msg</span>=<span class="string">'[&#123;"name":"测试一"&#125;,&#123;"name":"测试二"&#125;]'</span> <span class="attr">title</span>=<span class="string">"title值"</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component2</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"component-2"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>我是一个自定义的组件,传过来的值是&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">'item in msg|jsonParse'</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Vue.filter(<span class="string">'jsonParse'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(value);</div><div class="line">&#125;);</div><div class="line"><span class="keyword">var</span> MyComponent2 = Vue.extend(&#123;</div><div class="line">    props:[<span class="string">'msg'</span>,<span class="string">'title'</span>],</div><div class="line">    template: <span class="string">'#component-2'</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">// 全局注册组件，tag 为 my-component</span></div><div class="line">Vue.component(<span class="string">'my-component2'</span>, MyComponent2);</div><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">    el:<span class="string">'#props-container'</span>,</div><div class="line">    data:&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><a href="/demo/vue-demo/vue_component.html">查看demo</a><br>传值也比较简单, 我觉得vue成功的的一部分原因就在于它的灵活性以及简单优美.</p>
<h4 id="二、组件打包合并"><a href="#二、组件打包合并" class="headerlink" title="二、组件打包合并"></a>二、组件打包合并</h4><p>当今的前端发展非常迅速,有非常好用的打包合并工具,例如gulp grunt webpack browserify fis等等构建工具,<br>由于在百度工作了一段时间,所以对fis还是比较熟悉,但是webpack目前还没用过,因为fis我已经觉得非常好用了,它就是有点重.<br>说说他们的区别吧<br>1) gulp和grunt更倾向于小工具,做一些打包合并压缩,以及你可以去写一些自己的插件,来优化构建.<br>2) browserify webpack 是模块化发展的结果 , 一开始主要还是在线编译的seajs 和 requirejs, browserify webpack 可以实现预编译, 在后台编译好,省去了在线编译加载多个文件的方式.<br>3) <a href="">fis</a> 主要是比较完善的构建工具,百度前端团队开发,支持打包合并压缩以及模块化的编译等等.</p>
<blockquote>
<p>新： 使用脚手架工具 <a href="https://github.com/vuejs/vue-cli" target="_blank" rel="external">vue-cli</a> 可以快速地构建项目：单文件 Vue 组件，热加载，保存时检查代码，单元测试等。<br>官方推荐,对于大型项目，为了更好地管理代码使用模块构建系统非常必要。推荐代码使用 CommonJS 或 ES6 模块，然后使用 Webpack 或 Browserify 打包。<br>Webpack 和 Browserify 不只是模块打包器。两者都提供了源码转换 API，通过它可以用其它预处理器转换源码。例如，借助 babel-loader 或 babelify 代码可以使用 ES2015/2016 语法。<br>如果你之前没有用过它们，我强烈推荐你阅读一些教程，了解模块打包器，然后使用最新的 ECMAScript 特性写 JavaScript。</p>
</blockquote>
<h6 id="vue-cli方案"><a href="#vue-cli方案" class="headerlink" title="vue-cli方案"></a>vue-cli方案</h6><p>官方给的脚手架工具vue-cli 安装方法:</p>
<p>intall<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install -g vue-cli</div></pre></td></tr></table></figure></p>
<p>Usage<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vue init &lt;template-name&gt; &lt;project-name&gt;</div></pre></td></tr></table></figure></p>
<p>Example:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vue init webpack my-project</div></pre></td></tr></table></figure></p>
<p>安装完毕后<br>在命令行执行 vue init webpack my-project<br><img src="/images/vue/33.png" alt=""></p>
<p>生成的目录结构<br><img src="/images/vue/44.png" alt=""></p>
<p>打开md文件,看任何一下项目一定要扫一眼md文件,这里有作者对项目的描述以及用法等.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># install dependencies</span></div><div class="line">npm install</div><div class="line"></div><div class="line"><span class="comment"># serve with hot reload at localhost:8080</span></div><div class="line">npm run dev</div><div class="line"></div><div class="line"><span class="comment"># build for production with minification</span></div><div class="line">npm run build</div><div class="line"></div><div class="line"><span class="comment"># run unit tests</span></div><div class="line">npm run unit</div><div class="line"></div><div class="line"><span class="comment"># run e2e tests</span></div><div class="line">npm run e2e</div><div class="line"></div><div class="line"><span class="comment"># run all tests</span></div><div class="line">npm <span class="built_in">test</span></div></pre></td></tr></table></figure></p>
<p>文件夹目录src里存放的源码.vue的源码,我们用这个脚手架就可以开发前端程序了,还是比较简单,我觉得这个脚手架开发spa应用没啥问题,<br>但是如果开发跟后台对接的,肯定就不行了,需要跟后台结合一下,需要把发布后的路径发布到后台可以访问的模板路径就好了.</p>
<h4 id="三、vue-打包demo"><a href="#三、vue-打包demo" class="headerlink" title="三、vue 打包demo"></a>三、vue 打包demo</h4></div></article></div></section><footer><div class="paginator"><a href="/2016/09/11/webpack/" class="prev">上一篇</a><a href="/2016/04/16/vue/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'seansun';
var disqus_identifier = '2016/04/18/vue-build/';
var disqus_title = 'vue 构建和组件开发';
var disqus_url = 'http://greatboy.github.io/2016/04/18/vue-build/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//seansun.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2016 <a href="http://greatboy.github.io">greatboy</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>