<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> webpack 打包合并 · greatboy的博客</title><meta name="description" content="webpack 打包合并 - greatboy"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://greatboy.github.io/atom.xml" title="greatboy的博客"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/u/5241534083" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/greatboy" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">webpack 打包合并</h1><div class="post-info">Sep 11, 2016</div><div class="post-content"><blockquote>
<p>随着nodejs的发展,对于前端来说是一个福音,随之而来的前端开发们共享了非常多优秀的工具,前端的打包合并一直在前端基础构建中起了很重要的作用,<br>对于前端的开发模式以及线上的运行优化有这非常重要的影响. 一直用fis在做这方面的构建,为了够好的开发构建vue,那么webpack也应该好好熟悉一下.</p>
</blockquote>
<a id="more"></a>
<h5 id="一-webpack的安装"><a href="#一-webpack的安装" class="headerlink" title="一, webpack的安装"></a>一, webpack的安装</h5><p>在命令行运行命令,这里说明一下 <code>-g</code> 是什么含义,就是安装到全局环境中,如果不加-g,那么它只会安装到你本地目录的node_modules文件夹下面,也就意味着,在其他文件中没办法用webpack</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install webpack -g</div></pre></td></tr></table></figure>
<p>安装完成后,我们需要为项目生成一个package.json的文件,主要用于标记webpack的依赖.回头其他人开发项目时,可以直接 npm install就可以了.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm init</div><div class="line">npm install webpack --save-dev</div></pre></td></tr></table></figure>
<p>npm init 先生成packge文件,<br>npm install webpack –save-dev 新建webpack并且保存到package.json文件中.</p>
<h5 id="二-webpack的配置"><a href="#二-webpack的配置" class="headerlink" title="二, webpack的配置"></a>二, webpack的配置</h5><div class="tip">每个项目下都必须配置有一个 webpack.config.js,类似于Gruntfile.js,其实是一个配置文件,webpack会读取文件中的配置来处理你要执行的那些配置.</div>





<h5 id="三-写一个简单的demo"><a href="#三-写一个简单的demo" class="headerlink" title="三, 写一个简单的demo"></a>三, 写一个简单的demo</h5><p>创建test.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="string">'一个简单的demo'</span>);</div></pre></td></tr></table></figure>
<p>创建index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>webpack demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"testbuild.js"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>由于我们没写webpack.config.js,我们可以运行命令，生成testbuild.js文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">webpack ./test.js testbuild.js</div></pre></td></tr></table></figure>
<p>在浏览器中打开index.html文件</p>
<p>打开控制台,已经输入了我们想要的结果了.<br><img src="/images/vue/55.png" alt=""></p>
<p>在创建文件test1.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> test1 = &#123;</div><div class="line">    init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.dir(<span class="string">'我是来自于test1.js'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">module</span>.exports = test1;</div></pre></td></tr></table></figure></p>
<p>修改test.js文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> test1 = <span class="built_in">require</span>(<span class="string">"./test1.js"</span>);</div><div class="line">test1.init();</div></pre></td></tr></table></figure>
<p>运行命令<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">webpack ./test.js testbuild.js</div></pre></td></tr></table></figure></p>
<p>查看index.html</p>
<p>我们来看一下webpack都干了什么,其实给我们加了一段代码,会生成一个module数组,并且把依赖的文件自动打包加载进来.也就是说原来我们通过seajs和requirejs在线加载的模块文件,已经全部打包到webpack中了.<br>有点就是不用在线上加载那么多modulejs了.通过webpack配置,我们可以按需打包.这个功能其实<code>fis</code>也有.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/******/</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">modules</span>) </span>&#123;</div><div class="line">    <span class="comment">// webpackBootstrap</span></div><div class="line">    <span class="comment">/******/</span></div><div class="line">    <span class="comment">// The module cache</span></div><div class="line">    <span class="comment">/******/</span></div><div class="line">    <span class="keyword">var</span> installedModules = &#123;&#125;;</div><div class="line">    <span class="comment">/******/</span></div><div class="line">    <span class="comment">// The require function</span></div><div class="line">    <span class="comment">/******/</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__webpack_require__</span>(<span class="params">moduleId</span>) </span>&#123;</div><div class="line">        <span class="comment">/******/</span></div><div class="line">        <span class="comment">// Check if module is in cache</span></div><div class="line">        <span class="comment">/******/</span></div><div class="line">        <span class="keyword">if</span> (installedModules[moduleId])</div><div class="line">            <span class="comment">/******/</span></div><div class="line">            <span class="keyword">return</span> installedModules[moduleId].exports;</div><div class="line">        <span class="comment">/******/</span></div><div class="line">        <span class="comment">// Create a new module (and put it into the cache)</span></div><div class="line">        <span class="comment">/******/</span></div><div class="line">        <span class="keyword">var</span> <span class="built_in">module</span> = installedModules[moduleId] = &#123;</div><div class="line">            <span class="comment">/******/</span></div><div class="line">            exports: &#123;&#125;,</div><div class="line">            <span class="comment">/******/</span></div><div class="line">            id: moduleId,</div><div class="line">            <span class="comment">/******/</span></div><div class="line">            loaded: <span class="literal">false</span><span class="comment">/******/</span></div><div class="line">        &#125;;</div><div class="line">        <span class="comment">/******/</span></div><div class="line">        <span class="comment">// Execute the module function</span></div><div class="line">        <span class="comment">/******/</span></div><div class="line">        modules[moduleId].call(<span class="built_in">module</span>.exports, <span class="built_in">module</span>, <span class="built_in">module</span>.exports, __webpack_require__);</div><div class="line">        <span class="comment">/******/</span></div><div class="line">        <span class="comment">// Flag the module as loaded</span></div><div class="line">        <span class="comment">/******/</span></div><div class="line">        <span class="built_in">module</span>.loaded = <span class="literal">true</span>;</div><div class="line">        <span class="comment">/******/</span></div><div class="line">        <span class="comment">// Return the exports of the module</span></div><div class="line">        <span class="comment">/******/</span></div><div class="line">        <span class="keyword">return</span> <span class="built_in">module</span>.exports;</div><div class="line">        <span class="comment">/******/</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">/******/</span></div><div class="line">    <span class="comment">// expose the modules object (__webpack_modules__)</span></div><div class="line">    <span class="comment">/******/</span></div><div class="line">    __webpack_require__.m = modules;</div><div class="line">    <span class="comment">/******/</span></div><div class="line">    <span class="comment">// expose the module cache</span></div><div class="line">    <span class="comment">/******/</span></div><div class="line">    __webpack_require__.c = installedModules;</div><div class="line">    <span class="comment">/******/</span></div><div class="line">    <span class="comment">// __webpack_public_path__</span></div><div class="line">    <span class="comment">/******/</span></div><div class="line">    __webpack_require__.p = <span class="string">""</span>;</div><div class="line">    <span class="comment">/******/</span></div><div class="line">    <span class="comment">// Load entry module and return exports</span></div><div class="line">    <span class="comment">/******/</span></div><div class="line">    <span class="keyword">return</span> __webpack_require__(<span class="number">0</span>);</div><div class="line">    <span class="comment">/******/</span></div><div class="line">&#125;)<span class="comment">/************************************************************************/</span></div><div class="line"><span class="comment">/******/</span></div><div class="line">([<span class="comment">/* 0 */</span></div><div class="line"><span class="comment">/***/</span></div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> test1 = __webpack_require__(<span class="number">1</span>);</div><div class="line">    test1.init();</div><div class="line">    <span class="comment">/***/</span></div><div class="line">&#125;</div><div class="line">, <span class="comment">/* 1 */</span></div><div class="line"><span class="comment">/***/</span></div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> test1 = &#123;</div><div class="line">        init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.dir(<span class="string">'我是来自于test1.js'</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">module</span>.exports = test1;</div><div class="line">    <span class="comment">/***/</span></div><div class="line">&#125;</div><div class="line"><span class="comment">/******/</span></div><div class="line">]);</div></pre></td></tr></table></figure>
<h6 id="使用配置文件"><a href="#使用配置文件" class="headerlink" title="使用配置文件"></a>使用配置文件</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line"> entry: <span class="string">"./test.js"</span>,</div><div class="line"> output: &#123;</div><div class="line">     path: ./,</div><div class="line">     filename: <span class="string">"testbuild.js"</span></div><div class="line"> &#125;,</div><div class="line"> <span class="built_in">module</span>: &#123;</div><div class="line">     loaders: []</div><div class="line"> &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>运行 webpack试试,也会出现我们出现的结果.</p>
<h6 id="0-entry-和-output"><a href="#0-entry-和-output" class="headerlink" title="0) entry 和 output"></a>0) entry 和 output</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">entry: &#123;</div><div class="line">    page1: <span class="string">"./test.js"</span>,</div><div class="line">    page2: <span class="string">"./index.js"</span>,</div><div class="line">    page3: <span class="string">"./index1.js"</span></div><div class="line">&#125;,</div><div class="line">output: &#123;</div><div class="line">    path: <span class="string">'./'</span>,</div><div class="line">    filename: <span class="string">"[name].bundle.js"</span></div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>entry是只文件的入口，例如page1、page2也就相当于页面的入口文件</p>
<p>output 其中path是指输出的路径，filename只输出的文件名</p>
<h6 id="1）插件项"><a href="#1）插件项" class="headerlink" title="1）插件项"></a>1）插件项</h6><p>plugins:</p>
<p>新建index.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> test1 = <span class="built_in">require</span>(<span class="string">"./test1.js"</span>);</div><div class="line">test1.init();</div></pre></td></tr></table></figure></p>
<p>例如我们把配置文件写为两个入口文件，和两个出口文件。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="comment">//插件项</span></div><div class="line">    entry: &#123;</div><div class="line">        page1: <span class="string">"./test.js"</span>,</div><div class="line">        page2: <span class="string">"./index.js"</span></div><div class="line">    &#125;,</div><div class="line">    output: &#123;</div><div class="line">        path: <span class="string">'./'</span>,</div><div class="line">        filename: <span class="string">"[name].bundle.js"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="built_in">module</span>: &#123;</div><div class="line">        loaders: [&#123;</div><div class="line">                test: <span class="regexp">/\.json$/</span>,</div><div class="line">                loader: <span class="string">"json"</span></div><div class="line">            &#125;, &#123;</div><div class="line">                test: <span class="regexp">/\.less$/</span>,</div><div class="line">                loader: <span class="string">'style-loader!css-loader!less-loader'</span></div><div class="line">            &#125;, <span class="comment">// use ! to chain loaders</span></div><div class="line">            &#123;</div><div class="line">                test: <span class="regexp">/\.css$/</span>,</div><div class="line">                loader: <span class="string">'style-loader!css-loader'</span></div><div class="line">            &#125;, &#123;</div><div class="line">                test: <span class="regexp">/\.(png|jpg)$/</span>,</div><div class="line">                loader: <span class="string">'url-loader?limit=8192'</span></div><div class="line">            &#125; <span class="comment">// inline base64 URLs for &lt;=8k images, direct URLs for the rest</span></div><div class="line">        ]</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>运行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">webpack</div></pre></td></tr></table></figure></p>
<p>此时我们发现生成两个page1.bundle.js以及page2.bundle.js<br>但是我们发现他们两个文件一模一样，对我们来说，他们两个有公用的部分，我们可以提取出来，这样我们就不用再前端加载相同的代码了。</p>
<p>接着我们在webpack.config.js中添加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var webpack = require(&apos;webpack&apos;);</div><div class="line">var commonsPlugin = new webpack.optimize.CommonsChunkPlugin(&apos;common.js&apos;);</div><div class="line"></div><div class="line">plugins: [commonsPlugin]</div></pre></td></tr></table></figure></p>
<p>完整的文件为<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</div><div class="line"><span class="keyword">var</span> commonsPlugin = <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(<span class="string">'common.js'</span>);</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="comment">//插件项</span></div><div class="line">    plugins: [commonsPlugin],</div><div class="line">    entry: &#123;</div><div class="line">        page1: <span class="string">"./test.js"</span>,</div><div class="line">        page2: <span class="string">"./index.js"</span></div><div class="line">    &#125;,</div><div class="line">    output: &#123;</div><div class="line">        path: <span class="string">'./'</span>,</div><div class="line">        filename: <span class="string">"[name].bundle.js"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="built_in">module</span>: &#123;</div><div class="line">        loaders: [&#123;</div><div class="line">                test: <span class="regexp">/\.json$/</span>,</div><div class="line">                loader: <span class="string">"json"</span></div><div class="line">            &#125;, &#123;</div><div class="line">                test: <span class="regexp">/\.less$/</span>,</div><div class="line">                loader: <span class="string">'style-loader!css-loader!less-loader'</span></div><div class="line">            &#125;, <span class="comment">// use ! to chain loaders</span></div><div class="line">            &#123;</div><div class="line">                test: <span class="regexp">/\.css$/</span>,</div><div class="line">                loader: <span class="string">'style-loader!css-loader'</span></div><div class="line">            &#125;, &#123;</div><div class="line">                test: <span class="regexp">/\.(png|jpg)$/</span>,</div><div class="line">                loader: <span class="string">'url-loader?limit=8192'</span></div><div class="line">            &#125; <span class="comment">// inline base64 URLs for &lt;=8k images, direct URLs for the rest</span></div><div class="line">        ]</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>运行webpack之后，我们发现多了一个common.js文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/******/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">modules</span>) </span>&#123; <span class="comment">// webpackBootstrap</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// install a JSONP callback for chunk loading</span></div><div class="line"><span class="comment">/******/</span>    <span class="keyword">var</span> parentJsonpFunction = <span class="built_in">window</span>[<span class="string">"webpackJsonp"</span>];</div><div class="line"><span class="comment">/******/</span>    <span class="built_in">window</span>[<span class="string">"webpackJsonp"</span>] = <span class="function"><span class="keyword">function</span> <span class="title">webpackJsonpCallback</span>(<span class="params">chunkIds, moreModules</span>) </span>&#123;</div><div class="line"><span class="comment">/******/</span>        <span class="comment">// add "moreModules" to the modules object,</span></div><div class="line"><span class="comment">/******/</span>        <span class="comment">// then flag all "chunkIds" as loaded and fire callback</span></div><div class="line"><span class="comment">/******/</span>        <span class="keyword">var</span> moduleId, chunkId, i = <span class="number">0</span>, callbacks = [];</div><div class="line"><span class="comment">/******/</span>        <span class="keyword">for</span>(;i &lt; chunkIds.length; i++) &#123;</div><div class="line"><span class="comment">/******/</span>            chunkId = chunkIds[i];</div><div class="line"><span class="comment">/******/</span>            <span class="keyword">if</span>(installedChunks[chunkId])</div><div class="line"><span class="comment">/******/</span>                callbacks.push.apply(callbacks, installedChunks[chunkId]);</div><div class="line"><span class="comment">/******/</span>            installedChunks[chunkId] = <span class="number">0</span>;</div><div class="line"><span class="comment">/******/</span>        &#125;</div><div class="line"><span class="comment">/******/</span>        <span class="keyword">for</span>(moduleId <span class="keyword">in</span> moreModules) &#123;</div><div class="line"><span class="comment">/******/</span>            modules[moduleId] = moreModules[moduleId];</div><div class="line"><span class="comment">/******/</span>        &#125;</div><div class="line"><span class="comment">/******/</span>        <span class="keyword">if</span>(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules);</div><div class="line"><span class="comment">/******/</span>        <span class="keyword">while</span>(callbacks.length)</div><div class="line"><span class="comment">/******/</span>            callbacks.shift().call(<span class="literal">null</span>, __webpack_require__);</div><div class="line"><span class="comment">/******/</span>        <span class="keyword">if</span>(moreModules[<span class="number">0</span>]) &#123;</div><div class="line"><span class="comment">/******/</span>            installedModules[<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line"><span class="comment">/******/</span>            <span class="keyword">return</span> __webpack_require__(<span class="number">0</span>);</div><div class="line"><span class="comment">/******/</span>        &#125;</div><div class="line"><span class="comment">/******/</span>    &#125;;</div><div class="line"></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// The module cache</span></div><div class="line"><span class="comment">/******/</span>    <span class="keyword">var</span> installedModules = &#123;&#125;;</div><div class="line"></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// object to store loaded and loading chunks</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// "0" means "already loaded"</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// Array means "loading", array contains callbacks</span></div><div class="line"><span class="comment">/******/</span>    <span class="keyword">var</span> installedChunks = &#123;</div><div class="line"><span class="comment">/******/</span>        <span class="number">2</span>:<span class="number">0</span></div><div class="line"><span class="comment">/******/</span>    &#125;;</div><div class="line"></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// The require function</span></div><div class="line"><span class="comment">/******/</span>    <span class="function"><span class="keyword">function</span> <span class="title">__webpack_require__</span>(<span class="params">moduleId</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="comment">/******/</span>        <span class="comment">// Check if module is in cache</span></div><div class="line"><span class="comment">/******/</span>        <span class="keyword">if</span>(installedModules[moduleId])</div><div class="line"><span class="comment">/******/</span>            <span class="keyword">return</span> installedModules[moduleId].exports;</div><div class="line"></div><div class="line"><span class="comment">/******/</span>        <span class="comment">// Create a new module (and put it into the cache)</span></div><div class="line"><span class="comment">/******/</span>        <span class="keyword">var</span> <span class="built_in">module</span> = installedModules[moduleId] = &#123;</div><div class="line"><span class="comment">/******/</span>            exports: &#123;&#125;,</div><div class="line"><span class="comment">/******/</span>            id: moduleId,</div><div class="line"><span class="comment">/******/</span>            loaded: <span class="literal">false</span></div><div class="line"><span class="comment">/******/</span>        &#125;;</div><div class="line"></div><div class="line"><span class="comment">/******/</span>        <span class="comment">// Execute the module function</span></div><div class="line"><span class="comment">/******/</span>        modules[moduleId].call(<span class="built_in">module</span>.exports, <span class="built_in">module</span>, <span class="built_in">module</span>.exports, __webpack_require__);</div><div class="line"></div><div class="line"><span class="comment">/******/</span>        <span class="comment">// Flag the module as loaded</span></div><div class="line"><span class="comment">/******/</span>        <span class="built_in">module</span>.loaded = <span class="literal">true</span>;</div><div class="line"></div><div class="line"><span class="comment">/******/</span>        <span class="comment">// Return the exports of the module</span></div><div class="line"><span class="comment">/******/</span>        <span class="keyword">return</span> <span class="built_in">module</span>.exports;</div><div class="line"><span class="comment">/******/</span>    &#125;</div><div class="line"></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// This file contains only the entry chunk.</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// The chunk loading function for additional chunks</span></div><div class="line"><span class="comment">/******/</span>    __webpack_require__.e = <span class="function"><span class="keyword">function</span> <span class="title">requireEnsure</span>(<span class="params">chunkId, callback</span>) </span>&#123;</div><div class="line"><span class="comment">/******/</span>        <span class="comment">// "0" is the signal for "already loaded"</span></div><div class="line"><span class="comment">/******/</span>        <span class="keyword">if</span>(installedChunks[chunkId] === <span class="number">0</span>)</div><div class="line"><span class="comment">/******/</span>            <span class="keyword">return</span> callback.call(<span class="literal">null</span>, __webpack_require__);</div><div class="line"></div><div class="line"><span class="comment">/******/</span>        <span class="comment">// an array means "currently loading".</span></div><div class="line"><span class="comment">/******/</span>        <span class="keyword">if</span>(installedChunks[chunkId] !== <span class="literal">undefined</span>) &#123;</div><div class="line"><span class="comment">/******/</span>            installedChunks[chunkId].push(callback);</div><div class="line"><span class="comment">/******/</span>        &#125; <span class="keyword">else</span> &#123;</div><div class="line"><span class="comment">/******/</span>            <span class="comment">// start chunk loading</span></div><div class="line"><span class="comment">/******/</span>            installedChunks[chunkId] = [callback];</div><div class="line"><span class="comment">/******/</span>            <span class="keyword">var</span> head = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>];</div><div class="line"><span class="comment">/******/</span>            <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</div><div class="line"><span class="comment">/******/</span>            script.type = <span class="string">'text/javascript'</span>;</div><div class="line"><span class="comment">/******/</span>            script.charset = <span class="string">'utf-8'</span>;</div><div class="line"><span class="comment">/******/</span>            script.async = <span class="literal">true</span>;</div><div class="line"></div><div class="line"><span class="comment">/******/</span>            script.src = __webpack_require__.p + <span class="string">""</span> + chunkId + <span class="string">"."</span> + (&#123;<span class="string">"0"</span>:<span class="string">"page1"</span>,<span class="string">"1"</span>:<span class="string">"page2"</span>&#125;[chunkId]||chunkId) + <span class="string">".bundle.js"</span>;</div><div class="line"><span class="comment">/******/</span>            head.appendChild(script);</div><div class="line"><span class="comment">/******/</span>        &#125;</div><div class="line"><span class="comment">/******/</span>    &#125;;</div><div class="line"></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// expose the modules object (__webpack_modules__)</span></div><div class="line"><span class="comment">/******/</span>    __webpack_require__.m = modules;</div><div class="line"></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// expose the module cache</span></div><div class="line"><span class="comment">/******/</span>    __webpack_require__.c = installedModules;</div><div class="line"></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// __webpack_public_path__</span></div><div class="line"><span class="comment">/******/</span>    __webpack_require__.p = <span class="string">""</span>;</div><div class="line"><span class="comment">/******/</span> &#125;)</div><div class="line"><span class="comment">/************************************************************************/</span></div><div class="line"><span class="comment">/******/</span> ([</div><div class="line"><span class="comment">/* 0 */</span>,</div><div class="line"><span class="comment">/* 1 */</span></div><div class="line"><span class="comment">/***/</span> <span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> test1 = &#123;</div><div class="line">        init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.dir(<span class="string">'我是来自于test1.js'</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">module</span>.exports = test1;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;</div><div class="line"><span class="comment">/******/</span> ]);</div></pre></td></tr></table></figure></p>
<p>page1.bundle.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">webpackJsonp([<span class="number">0</span>],[</div><div class="line"><span class="comment">/* 0 */</span></div><div class="line"><span class="comment">/***/</span> <span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> test1 = __webpack_require__(<span class="number">1</span>);</div><div class="line">    test1.init();</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;</div><div class="line">]);</div></pre></td></tr></table></figure></p>
<p>page2.bundle.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">webpackJsonp([<span class="number">1</span>],[</div><div class="line"><span class="comment">/* 0 */</span></div><div class="line"><span class="comment">/***/</span> <span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> test1 = __webpack_require__(<span class="number">1</span>);</div><div class="line">    test1.init();</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;</div><div class="line">]);</div></pre></td></tr></table></figure></p>
<p>我们发现公用的一部分代码被提取出来了。赞一个。</p>
<p>加入我们在加入两个文件：<br>test2.js index1.js<br>index1.js作为入口文件，引用test2.js里的方法</p>
<p>接着运行webpack<br>这是会后page3.bundle.js 只包含了test2.js里的代码</p>
<blockquote>
<p>问题?? 1、在这里提出一个问题?就是现在对于我来说写代码还是比较麻烦的，因为我希望的时候这个入口文件不是由我来配置，而是自动遍历html中的入口文件。这是我觉得比较合理的地方。我觉得可以用插件来时实现，或者已经有了这样的插件</p>
</blockquote>
<h6 id="2）Loaders"><a href="#2）Loaders" class="headerlink" title="2）Loaders"></a>2）Loaders</h6><p>loaders是非常重要的一块配置，它将告诉我们每一种文件需要使用什么加载器来加载处理。<br>例如最近比较火爆的vue.js为结尾的.vue文件。</p>
<p>需要单独安装到本地,并且配置到配置文件里</p>
<p>1、json-loader 处理json文件</p>
<p>安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo npm install -g --save-dev json-loader</div></pre></td></tr></table></figure></p>
<p>用法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> json = <span class="built_in">require</span>(<span class="string">"json!./file.json"</span>);</div><div class="line"><span class="built_in">console</span>.dir(json);</div></pre></td></tr></table></figure></p>
<p>可以直接引用json文件中的对象包装成一个对象</p>
<p>2、Babel-Loader </p>
<p>label的应用,语言的转换</p>
<p>安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev babel-core babel-loader babel-preset-es2015 babel-preset-react</div><div class="line"></div><div class="line">``</div><div class="line"></div><div class="line">安装完成后，配置webpack.config.js</div><div class="line">``` javascript</div><div class="line">&#123;</div><div class="line">    <span class="built_in">test</span>: /\.js$/,</div><div class="line">    exclude: /node_modules/,</div><div class="line">    loader: <span class="string">'babel'</span>,//在webpack的module部分的loaders里进行配置即可</div><div class="line">    query: &#123;</div><div class="line">      presets: [<span class="string">'es2015'</span>,<span class="string">'react'</span>]</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>新建Person.js，用es6语法书写代码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(name, age)&#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">    <span class="keyword">this</span>.age = age;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  say()&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">`我是<span class="subst">$&#123;this.name&#125;</span>,我今年<span class="subst">$&#123;this.age&#125;</span>岁了。`</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Person;</div></pre></td></tr></table></figure></p>
<p>在index.js中添加</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Person <span class="keyword">from</span> <span class="string">'./Person.js'</span>;</div><div class="line"></div><div class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> Person(<span class="string">'张三'</span>, <span class="number">20</span>);</div><div class="line"><span class="built_in">document</span>.write(p.say());</div></pre></td></tr></table></figure>
<p>编译后生成的文件<br>page2.bundle.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div></pre></td><td class="code"><pre><div class="line">webpackJsonp([<span class="number">1</span>, <span class="number">3</span>], [</div><div class="line">    <span class="comment">/* 0 */</span></div><div class="line">    <span class="comment">/***/</span></div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</div><div class="line"><span class="meta"></span></div><div class="line">        "use strict";</div><div class="line"></div><div class="line">        <span class="keyword">var</span> _Person = __webpack_require__(<span class="number">2</span>);</div><div class="line"></div><div class="line">        <span class="keyword">var</span> _Person2 = _interopRequireDefault(_Person);</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">_interopRequireDefault</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> obj &amp;&amp; obj.__esModule ? obj : &#123; <span class="keyword">default</span>: obj &#125;; &#125;</div><div class="line"></div><div class="line">        <span class="keyword">var</span> test1 = __webpack_require__(<span class="number">1</span>);</div><div class="line">        test1.init();</div><div class="line">        <span class="keyword">var</span> json = __webpack_require__(<span class="number">3</span>);</div><div class="line">        <span class="built_in">console</span>.dir(json);</div><div class="line"></div><div class="line">        <span class="keyword">var</span> p = <span class="keyword">new</span> _Person2.default(<span class="string">'张三'</span>, <span class="number">20</span>);</div><div class="line">        <span class="built_in">document</span>.write(p.say());</div><div class="line"></div><div class="line">        <span class="comment">/***/</span></div><div class="line">    &#125;,</div><div class="line">    <span class="comment">/* 1 */</span></div><div class="line">    <span class="comment">/***/</span></div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</div><div class="line"><span class="meta"></span></div><div class="line">        'use strict';</div><div class="line"></div><div class="line">        <span class="keyword">var</span> test1 = &#123;</div><div class="line">            init: <span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="built_in">console</span>.dir(<span class="string">'我是来自于test1.js'</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">        <span class="built_in">module</span>.exports = test1;</div><div class="line"></div><div class="line">        <span class="comment">/***/</span></div><div class="line">    &#125;,</div><div class="line">    <span class="comment">/* 2 */</span></div><div class="line">    <span class="comment">/***/</span></div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</div><div class="line"><span class="meta"></span></div><div class="line">        "use strict";</div><div class="line"></div><div class="line">        <span class="built_in">Object</span>.defineProperty(exports, <span class="string">"__esModule"</span>, &#123;</div><div class="line">            value: <span class="literal">true</span></div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        <span class="keyword">var</span> _createClass = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">defineProperties</span>(<span class="params">target, props</span>) </span>&#123;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; props.length; i++) &#123;</div><div class="line">                    <span class="keyword">var</span> descriptor = props[i];</div><div class="line">                    descriptor.enumerable = descriptor.enumerable || <span class="literal">false</span>;</div><div class="line">                    descriptor.configurable = <span class="literal">true</span>;</div><div class="line">                    <span class="keyword">if</span> (<span class="string">"value"</span> <span class="keyword">in</span> descriptor) descriptor.writable = <span class="literal">true</span>;</div><div class="line">                    <span class="built_in">Object</span>.defineProperty(target, descriptor.key, descriptor); &#125; &#125;</div><div class="line">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">Constructor, protoProps, staticProps</span>) </span>&#123;</div><div class="line">                <span class="keyword">if</span> (protoProps) defineProperties(Constructor.prototype, protoProps);</div><div class="line">                <span class="keyword">if</span> (staticProps) defineProperties(Constructor, staticProps);</div><div class="line">                <span class="keyword">return</span> Constructor; &#125;; &#125;();</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">_classCallCheck</span>(<span class="params">instance, Constructor</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (!(instance <span class="keyword">instanceof</span> Constructor)) &#123;</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Cannot call a class as a function"</span>); &#125; &#125;</div><div class="line"></div><div class="line">        <span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</div><div class="line">                _classCallCheck(<span class="keyword">this</span>, Person);</div><div class="line"></div><div class="line">                <span class="keyword">this</span>.name = name;</div><div class="line">                <span class="keyword">this</span>.age = age;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            _createClass(Person, [&#123;</div><div class="line">                key: <span class="string">"say"</span>,</div><div class="line">                value: <span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                    <span class="keyword">return</span> <span class="string">"我是"</span> + <span class="keyword">this</span>.name + <span class="string">",我今年"</span> + <span class="keyword">this</span>.age + <span class="string">"岁了。"</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;]);</div><div class="line"></div><div class="line">            <span class="keyword">return</span> Person;</div><div class="line">        &#125;();</div><div class="line"></div><div class="line">        exports.default = Person;</div><div class="line"></div><div class="line">        <span class="comment">/***/</span></div><div class="line">    &#125;,</div><div class="line">    <span class="comment">/* 3 */</span></div><div class="line">    <span class="comment">/***/</span></div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</div><div class="line"></div><div class="line">        <span class="built_in">module</span>.exports = &#123;</div><div class="line">            <span class="string">"name"</span>: <span class="string">"test"</span></div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        <span class="comment">/***/</span></div><div class="line">    &#125;</div><div class="line">]);</div></pre></td></tr></table></figure>
<p>可以看到 Person类被转换成了es5的写法。赞一个，不过同学们要小心了，es5现在目前支持的浏览器也只能到ie9，并且ie9不支持严格模式，需要支持ie8的同学注意了，es5只有某几个属性支持。ie6/7的同学们就更惨了。。。。</p>
<p>3) css </p>
<p>安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev css-loader style-loader sass-loader less-loader less postcss-loader</div></pre></td></tr></table></figure></p>
<p>其中包括了sass和less,我们测试less<br>看看配置文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    test: <span class="regexp">/\.less$/</span>,</div><div class="line">    loader: <span class="string">'style-loader!css-loader!less-loader'</span></div><div class="line">&#125;, <span class="comment">// use ! to chain loaders</span></div><div class="line">&#123;</div><div class="line">    test: <span class="regexp">/\.css$/</span>,</div><div class="line">    loader: <span class="string">'style-loader!css-loader'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>创建file.less文件<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">@bg: black;</div><div class="line">body&#123;</div><div class="line">    background: @bg;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>index.js中加入<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">"!style!css!less!./file.less"</span>);</div></pre></td></tr></table></figure></p>
<p>运行webpack后，css已经被打包进入到js中，看图<br><img src="/images/webpack/11.png" alt=""></p>
<blockquote>
<p>问题?? 提出一个问题,如果是文件形式的，同样也有less路径的填写问题？</p>
</blockquote>
<p>4) url-loader</p>
<p>安装url-loader<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev url-loader file-loader</div></pre></td></tr></table></figure></p>
<p>配置文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    test: <span class="regexp">/\.(png|jpg)$/</span>,</div><div class="line">    loader: <span class="string">'url-loader?limit=8192'</span></div><div class="line">&#125;, <span class="comment">// inline base64 URLs for &lt;=8k images, direct URLs for the rest</span></div></pre></td></tr></table></figure></p>
<p>在index.js中添加代码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> img = <span class="built_in">require</span>(<span class="string">'./23.png'</span>);</div><div class="line"><span class="built_in">console</span>.dir(img);</div></pre></td></tr></table></figure></p>
<p>在file.less中添加<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">background</span>: <span class="selector-tag">url</span>(23<span class="selector-class">.png</span>) <span class="selector-tag">no-repeat</span>;</div></pre></td></tr></table></figure></p>
<p>运行webpack<br>可以看到<br>23.png转换成了1614a0070c3a3656c434ebca4d5f4000.png</p>
<blockquote>
<p>问题?? 就是html中的图片怎么处理？</p>
</blockquote>
<p>3、resolve  </p>
<pre><code>root告诉我们module从哪里查找

extensions 自动扩展文件后缀名，也就是说可以省略地址

alias 别名，可以代替js的路径
</code></pre><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">resolve: &#123;</div><div class="line">    <span class="comment">//查找module的话从这里开始查找</span></div><div class="line">    root: <span class="string">'~/test/src'</span>, <span class="comment">//绝对路径</span></div><div class="line">    <span class="comment">//自动扩展文件后缀名，意味着我们require模块可以省略不写后缀名</span></div><div class="line">    extensions: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.json'</span>, <span class="string">'.scss'</span>],</div><div class="line">    <span class="comment">//模块别名定义，方便后续直接引用别名，无须多写长长的地址</span></div><div class="line">    alias: &#123;</div><div class="line">        test : <span class="string">'js/test1.js'</span>,<span class="comment">//后续直接 require('test') 即可</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>webpack 命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">$ webpack --config XXX.js   //使用另一份配置文件（比如webpack.config2.js）来打包</div><div class="line"></div><div class="line">$ webpack --watch   //监听变动并自动打包</div><div class="line"></div><div class="line">$ webpack -p    //压缩混淆脚本，这个非常非常重要！</div><div class="line"></div><div class="line">$ webpack <span class="_">-d</span>    //生成map映射文件，告知哪些模块被最终打包到哪里了</div></pre></td></tr></table></figure>
<p>执行也可以加参数，例如加</p>
<p>$ webpack –display-error-details   可以抛出更详细的错误。</p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/09/23/webpack-source/" class="prev">上一篇</a><a href="/2016/04/18/vue-build/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'seansun';
var disqus_identifier = '2016/09/11/webpack/';
var disqus_title = 'webpack 打包合并';
var disqus_url = 'http://greatboy.github.io/2016/09/11/webpack/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//seansun.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2016 <a href="http://greatboy.github.io">greatboy</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>